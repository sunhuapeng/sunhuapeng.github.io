{
  "version": 3,
  "sources": ["../three/examples/jsm/renderers/CSS2DRenderer.js"],
  "sourcesContent": ["import {\n\tMatrix4,\n\tObject3D,\n\tVector3\n} from 'three';\n\nclass CSS2DObject extends Object3D {\n\n \tconstructor( element ) {\n\n\t\tsuper();\n\n\t\tthis.element = element || document.createElement( 'div' );\n\n\t\tthis.element.style.position = 'absolute';\n\n\t\tthis.addEventListener( 'removed', function () {\n\n\t\t\tthis.traverse( function ( object ) {\n\n\t\t\t\tif ( object.element instanceof Element && object.element.parentNode !== null ) {\n\n\t\t\t\t\tobject.element.parentNode.removeChild( object.element );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.element = source.element.cloneNode( true );\n\n\t\treturn this;\n\n\t}\n\n}\n\nCSS2DObject.prototype.isCSS2DObject = true;\n\n//\n\nconst _vector = new Vector3();\nconst _viewMatrix = new Matrix4();\nconst _viewProjectionMatrix = new Matrix4();\nconst _a = new Vector3();\nconst _b = new Vector3();\n\nclass CSS2DRenderer {\n\n\tconstructor() {\n\n\t\tconst _this = this;\n\n\t\tlet _width, _height;\n\t\tlet _widthHalf, _heightHalf;\n\n\t\tconst cache = {\n\t\t\tobjects: new WeakMap()\n\t\t};\n\n\t\tconst domElement = document.createElement( 'div' );\n\t\tdomElement.style.overflow = 'hidden';\n\n\t\tthis.domElement = domElement;\n\n\t\tthis.getSize = function () {\n\n\t\t\treturn {\n\t\t\t\twidth: _width,\n\t\t\t\theight: _height\n\t\t\t};\n\n\t\t};\n\n\t\tthis.render = function ( scene, camera ) {\n\n\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t\t_viewMatrix.copy( camera.matrixWorldInverse );\n\t\t\t_viewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, _viewMatrix );\n\n\t\t\trenderObject( scene, scene, camera );\n\t\t\tzOrder( scene );\n\n\t\t};\n\n\t\tthis.setSize = function ( width, height ) {\n\n\t\t\t_width = width;\n\t\t\t_height = height;\n\n\t\t\t_widthHalf = _width / 2;\n\t\t\t_heightHalf = _height / 2;\n\n\t\t\tdomElement.style.width = width + 'px';\n\t\t\tdomElement.style.height = height + 'px';\n\n\t\t};\n\n\t\tfunction renderObject( object, scene, camera ) {\n\n\t\t\tif ( object.isCSS2DObject ) {\n\n\t\t\t\tobject.onBeforeRender( _this, scene, camera );\n\n\t\t\t\t_vector.setFromMatrixPosition( object.matrixWorld );\n\t\t\t\t_vector.applyMatrix4( _viewProjectionMatrix );\n\n\t\t\t\tconst element = object.element;\n\n\t\t\t\tif ( /apple/i.test( navigator.vendor ) ) {\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/21415\n\t\t\t\t\telement.style.transform = 'translate(-50%,-50%) translate(' + Math.round( _vector.x * _widthHalf + _widthHalf ) + 'px,' + Math.round( - _vector.y * _heightHalf + _heightHalf ) + 'px)';\n\n\t\t\t\t} else {\n\n\t\t\t\t\telement.style.transform = 'translate(-50%,-50%) translate(' + ( _vector.x * _widthHalf + _widthHalf ) + 'px,' + ( - _vector.y * _heightHalf + _heightHalf ) + 'px)';\n\n\t\t\t\t}\n\n\t\t\t\telement.style.display = ( object.visible && _vector.z >= - 1 && _vector.z <= 1 ) ? '' : 'none';\n\n\t\t\t\tconst objectData = {\n\t\t\t\t\tdistanceToCameraSquared: getDistanceToSquared( camera, object )\n\t\t\t\t};\n\n\t\t\t\tcache.objects.set( object, objectData );\n\n\t\t\t\tif ( element.parentNode !== domElement ) {\n\n\t\t\t\t\tdomElement.appendChild( element );\n\n\t\t\t\t}\n\n\t\t\t\tobject.onAfterRender( _this, scene, camera );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\trenderObject( object.children[ i ], scene, camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction getDistanceToSquared( object1, object2 ) {\n\n\t\t\t_a.setFromMatrixPosition( object1.matrixWorld );\n\t\t\t_b.setFromMatrixPosition( object2.matrixWorld );\n\n\t\t\treturn _a.distanceToSquared( _b );\n\n\t\t}\n\n\t\tfunction filterAndFlatten( scene ) {\n\n\t\t\tconst result = [];\n\n\t\t\tscene.traverse( function ( object ) {\n\n\t\t\t\tif ( object.isCSS2DObject ) result.push( object );\n\n\t\t\t} );\n\n\t\t\treturn result;\n\n\t\t}\n\n\t\tfunction zOrder( scene ) {\n\n\t\t\tconst sorted = filterAndFlatten( scene ).sort( function ( a, b ) {\n\n\t\t\t\tconst distanceA = cache.objects.get( a ).distanceToCameraSquared;\n\t\t\t\tconst distanceB = cache.objects.get( b ).distanceToCameraSquared;\n\n\t\t\t\treturn distanceA - distanceB;\n\n\t\t\t} );\n\n\t\t\tconst zMax = sorted.length;\n\n\t\t\tfor ( let i = 0, l = sorted.length; i < l; i ++ ) {\n\n\t\t\t\tsorted[ i ].element.style.zIndex = zMax - i;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nexport { CSS2DObject, CSS2DRenderer };\n"],
  "mappings": ";;;;;;;AAMA,gCAA0B,SAAS;AAAA,EAEjC,YAAa,SAAU;AAEvB;AAEA,SAAK,UAAU,WAAW,SAAS,cAAe;AAElD,SAAK,QAAQ,MAAM,WAAW;AAE9B,SAAK,iBAAkB,WAAW,WAAY;AAE7C,WAAK,SAAU,SAAW,QAAS;AAElC,YAAK,OAAO,mBAAmB,WAAW,OAAO,QAAQ,eAAe,MAAO;AAE9E,iBAAO,QAAQ,WAAW,YAAa,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAUlD,KAAM,QAAQ,WAAY;AAEzB,UAAM,KAAM,QAAQ;AAEpB,SAAK,UAAU,OAAO,QAAQ,UAAW;AAEzC,WAAO;AAAA;AAAA;AAMT,YAAY,UAAU,gBAAgB;AAItC,IAAM,UAAU,IAAI;AACpB,IAAM,cAAc,IAAI;AACxB,IAAM,wBAAwB,IAAI;AAClC,IAAM,KAAK,IAAI;AACf,IAAM,KAAK,IAAI;AAEf,0BAAoB;AAAA,EAEnB,cAAc;AAEb,UAAM,QAAQ;AAEd,QAAI,QAAQ;AACZ,QAAI,YAAY;AAEhB,UAAM,QAAQ;AAAA,MACb,SAAS,IAAI;AAAA;AAGd,UAAM,aAAa,SAAS,cAAe;AAC3C,eAAW,MAAM,WAAW;AAE5B,SAAK,aAAa;AAElB,SAAK,UAAU,WAAY;AAE1B,aAAO;AAAA,QACN,OAAO;AAAA,QACP,QAAQ;AAAA;AAAA;AAKV,SAAK,SAAS,SAAW,OAAO,QAAS;AAExC,UAAK,MAAM,eAAe;AAAO,cAAM;AACvC,UAAK,OAAO,WAAW;AAAO,eAAO;AAErC,kBAAY,KAAM,OAAO;AACzB,4BAAsB,iBAAkB,OAAO,kBAAkB;AAEjE,mBAAc,OAAO,OAAO;AAC5B,aAAQ;AAAA;AAIT,SAAK,UAAU,SAAW,OAAO,QAAS;AAEzC,eAAS;AACT,gBAAU;AAEV,mBAAa,SAAS;AACtB,oBAAc,UAAU;AAExB,iBAAW,MAAM,QAAQ,QAAQ;AACjC,iBAAW,MAAM,SAAS,SAAS;AAAA;AAIpC,0BAAuB,QAAQ,OAAO,QAAS;AAE9C,UAAK,OAAO,eAAgB;AAE3B,eAAO,eAAgB,OAAO,OAAO;AAErC,gBAAQ,sBAAuB,OAAO;AACtC,gBAAQ,aAAc;AAEtB,cAAM,UAAU,OAAO;AAEvB,YAAK,SAAS,KAAM,UAAU,SAAW;AAGxC,kBAAQ,MAAM,YAAY,oCAAoC,KAAK,MAAO,QAAQ,IAAI,aAAa,cAAe,QAAQ,KAAK,MAAO,CAAE,QAAQ,IAAI,cAAc,eAAgB;AAAA,eAE5K;AAEN,kBAAQ,MAAM,YAAY,oCAAsC,SAAQ,IAAI,aAAa,cAAe,QAAU,EAAE,QAAQ,IAAI,cAAc,eAAgB;AAAA;AAI/J,gBAAQ,MAAM,UAAY,OAAO,WAAW,QAAQ,KAAK,MAAO,QAAQ,KAAK,IAAM,KAAK;AAExF,cAAM,aAAa;AAAA,UAClB,yBAAyB,qBAAsB,QAAQ;AAAA;AAGxD,cAAM,QAAQ,IAAK,QAAQ;AAE3B,YAAK,QAAQ,eAAe,YAAa;AAExC,qBAAW,YAAa;AAAA;AAIzB,eAAO,cAAe,OAAO,OAAO;AAAA;AAIrC,eAAU,IAAI,GAAG,IAAI,OAAO,SAAS,QAAQ,IAAI,GAAG,KAAO;AAE1D,qBAAc,OAAO,SAAU,IAAK,OAAO;AAAA;AAAA;AAM7C,kCAA+B,SAAS,SAAU;AAEjD,SAAG,sBAAuB,QAAQ;AAClC,SAAG,sBAAuB,QAAQ;AAElC,aAAO,GAAG,kBAAmB;AAAA;AAI9B,8BAA2B,OAAQ;AAElC,YAAM,SAAS;AAEf,YAAM,SAAU,SAAW,QAAS;AAEnC,YAAK,OAAO;AAAgB,iBAAO,KAAM;AAAA;AAI1C,aAAO;AAAA;AAIR,oBAAiB,OAAQ;AAExB,YAAM,SAAS,iBAAkB,OAAQ,KAAM,SAAW,GAAG,GAAI;AAEhE,cAAM,YAAY,MAAM,QAAQ,IAAK,GAAI;AACzC,cAAM,YAAY,MAAM,QAAQ,IAAK,GAAI;AAEzC,eAAO,YAAY;AAAA;AAIpB,YAAM,OAAO,OAAO;AAEpB,eAAU,IAAI,GAAG,IAAI,OAAO,QAAQ,IAAI,GAAG,KAAO;AAEjD,eAAQ,GAAI,QAAQ,MAAM,SAAS,OAAO;AAAA;AAAA;AAAA;AAAA;",
  "names": []
}
